{"ast":null,"code":"import { VISIBILITY_LEVELS } from '../types';\nconst BASE_URL = 'http://localhost:3001';\nexport const taskService = {\n  // Fetch all tasks for a specific user\n  async getUserTasks(userId) {\n    try {\n      // Fetch both user's private tasks and all family tasks\n      const response = await fetch(`${BASE_URL}/tasks?visibility=${VISIBILITY_LEVELS.FAMILY}` + `&userId=${userId}`);\n      if (!response.ok) throw new Error('Failed to fetch tasks');\n      const tasks = await response.json();\n\n      // Fetch all family tasks\n      const familyResponse = await fetch(`${BASE_URL}/tasks?visibility=${VISIBILITY_LEVELS.FAMILY}`);\n      if (!familyResponse.ok) throw new Error('Failed to fetch family tasks');\n      const familyTasks = await familyResponse.json();\n\n      // Combine and deduplicate tasks\n      const allTasks = [...tasks, ...familyTasks];\n      const uniqueTasks = Array.from(new Map(allTasks.map(task => [task.id, task])).values());\n      return uniqueTasks;\n    } catch (error) {\n      console.error('Get tasks error:', error);\n      throw error;\n    }\n  },\n  // Create a new task\n  async createTask(taskData) {\n    try {\n      const response = await fetch(`${BASE_URL}/tasks`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...taskData,\n          id: Date.now().toString(),\n          createdAt: new Date().toISOString(),\n          visibility: taskData.visibility || VISIBILITY_LEVELS.PRIVATE\n        })\n      });\n      if (!response.ok) throw new Error('Failed to create task');\n      return await response.json();\n    } catch (error) {\n      console.error('Create task error:', error);\n      throw error;\n    }\n  },\n  // Update a task\n  async updateTask(taskId, updates) {\n    try {\n      const response = await fetch(`${BASE_URL}/tasks/${taskId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updates)\n      });\n      if (!response.ok) throw new Error('Failed to update task');\n      return await response.json();\n    } catch (error) {\n      console.error('Update task error:', error);\n      throw error;\n    }\n  },\n  // Delete a task\n  async deleteTask(taskId) {\n    try {\n      const response = await fetch(`${BASE_URL}/tasks/${taskId}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) throw new Error('Failed to delete task');\n      return true;\n    } catch (error) {\n      console.error('Delete task error:', error);\n      throw error;\n    }\n  }\n};","map":{"version":3,"names":["VISIBILITY_LEVELS","BASE_URL","taskService","getUserTasks","userId","response","fetch","FAMILY","ok","Error","tasks","json","familyResponse","familyTasks","allTasks","uniqueTasks","Array","from","Map","map","task","id","values","error","console","createTask","taskData","method","headers","body","JSON","stringify","Date","now","toString","createdAt","toISOString","visibility","PRIVATE","updateTask","taskId","updates","deleteTask"],"sources":["A:/Projects/FrontEnd/React Apps/task-tracker/src/services/taskService.js"],"sourcesContent":["import { VISIBILITY_LEVELS } from '../types';\r\n\r\nconst BASE_URL = 'http://localhost:3001';\r\n\r\nexport const taskService = {\r\n  // Fetch all tasks for a specific user\r\n  async getUserTasks(userId) {\r\n    try {\r\n      // Fetch both user's private tasks and all family tasks\r\n      const response = await fetch(\r\n        `${BASE_URL}/tasks?visibility=${VISIBILITY_LEVELS.FAMILY}` +\r\n        `&userId=${userId}`\r\n      );\r\n      if (!response.ok) throw new Error('Failed to fetch tasks');\r\n      const tasks = await response.json();\r\n\r\n      // Fetch all family tasks\r\n      const familyResponse = await fetch(\r\n        `${BASE_URL}/tasks?visibility=${VISIBILITY_LEVELS.FAMILY}`\r\n      );\r\n      if (!familyResponse.ok) throw new Error('Failed to fetch family tasks');\r\n      const familyTasks = await familyResponse.json();\r\n      \r\n     // Combine and deduplicate tasks\r\n     const allTasks = [...tasks, ...familyTasks];\r\n     const uniqueTasks = Array.from(new Map(allTasks.map(task => [task.id, task])).values());      \r\n      \r\n      \r\n      return uniqueTasks;\r\n    } catch (error) {\r\n      console.error('Get tasks error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Create a new task\r\n  async createTask(taskData) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/tasks`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ...taskData,\r\n          id: Date.now().toString(),\r\n          createdAt: new Date().toISOString(),\r\n          visibility: taskData.visibility || VISIBILITY_LEVELS.PRIVATE\r\n        }),\r\n      });\r\n      if (!response.ok) throw new Error('Failed to create task');\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Create task error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Update a task\r\n  async updateTask(taskId, updates) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/tasks/${taskId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(updates),\r\n      });\r\n      if (!response.ok) throw new Error('Failed to update task');\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Update task error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Delete a task\r\n  async deleteTask(taskId) {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/tasks/${taskId}`, {\r\n        method: 'DELETE'\r\n      });\r\n      if (!response.ok) throw new Error('Failed to delete task');\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Delete task error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}