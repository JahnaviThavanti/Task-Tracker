{"ast":null,"code":"var _jsxFileName = \"A:\\\\Projects\\\\FrontEnd\\\\React Apps\\\\task-tracker\\\\src\\\\components\\\\TaskList.js\",\n  _s = $RefreshSig$();\n// src/components/TaskList.js\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/authContext';\nimport { taskService } from '../services/taskService';\nimport { AddTask } from './AddTask';\nimport { TaskItem } from './TaskItem';\nimport { PERMISSIONS } from '../types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function TaskList() {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    user\n  } = useAuth();\n\n  // Load tasks when component mounts\n  useEffect(() => {\n    loadTasks();\n  }, [user.id]);\n  const loadTasks = async () => {\n    try {\n      setLoading(true);\n      const userTasks = await taskService.getUserTasks(user.id);\n      setTasks(userTasks);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load tasks');\n      console.error('Load tasks error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const addTask = async newTaskData => {\n    if (!hasPermission('create')) {\n      alert('You do not have permission to create tasks');\n      return;\n    }\n    try {\n      const newTask = await taskService.createTask({\n        ...newTaskData,\n        userId: user.id,\n        completed: false\n      });\n      setTasks(prevTasks => [...prevTasks, newTask]);\n    } catch (err) {\n      setError('Failed to create task');\n    }\n  };\n  const deleteTask = async taskId => {\n    if (!hasPermission('delete')) {\n      alert('You do not have permission to delete tasks');\n      return;\n    }\n    if (window.confirm('Are you sure you want to delete this task?')) {\n      try {\n        await taskService.deleteTask(taskId);\n        setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n      } catch (err) {\n        setError('Failed to delete task');\n      }\n    }\n  };\n  const toggleTask = async taskId => {\n    if (!hasPermission('update')) {\n      alert('You do not have permission to update tasks');\n      return;\n    }\n    try {\n      const task = tasks.find(t => t.id === taskId);\n      const updatedTask = await taskService.updateTask(taskId, {\n        completed: !task.completed\n      });\n      setTasks(prevTasks => prevTasks.map(task => task.id === taskId ? updatedTask : task));\n    } catch (err) {\n      setError('Failed to update task');\n    }\n  };\n  const hasPermission = action => {\n    return PERMISSIONS[user.role].includes(action);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading tasks...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"task-list p-4\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-500 mb-4\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), hasPermission('create') && /*#__PURE__*/_jsxDEV(AddTask, {\n      onAdd: addTask\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tasks\",\n      children: tasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500\",\n        children: \"No tasks yet. Add some tasks to start taskin'!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this) : tasks.map(task => /*#__PURE__*/_jsxDEV(TaskItem, {\n        ...task,\n        onToggle: () => toggleTask(task.id),\n        onDelete: () => deleteTask(task.id),\n        canUpdate: hasPermission('update'),\n        canDelete: hasPermission('delete')\n      }, task.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n_s(TaskList, \"4I1I9aF9kFTWFySTV+oarJcZiUA=\", false, function () {\n  return [useAuth];\n});\n_c = TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["useState","useEffect","useAuth","taskService","AddTask","TaskItem","PERMISSIONS","jsxDEV","_jsxDEV","TaskList","_s","tasks","setTasks","loading","setLoading","error","setError","user","loadTasks","id","userTasks","getUserTasks","err","console","addTask","newTaskData","hasPermission","alert","newTask","createTask","userId","completed","prevTasks","deleteTask","taskId","window","confirm","filter","task","toggleTask","find","t","updatedTask","updateTask","map","action","role","includes","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onAdd","length","onToggle","onDelete","canUpdate","canDelete","_c","$RefreshReg$"],"sources":["A:/Projects/FrontEnd/React Apps/task-tracker/src/components/TaskList.js"],"sourcesContent":["// src/components/TaskList.js\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/authContext';\nimport { taskService } from '../services/taskService';\nimport { AddTask } from './AddTask';\nimport { TaskItem } from './TaskItem';\nimport { PERMISSIONS } from '../types';\n\nexport function TaskList() {\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const { user } = useAuth();\n\n  // Load tasks when component mounts\n  useEffect(() => {\n    loadTasks();\n  }, [user.id]);\n\n  const loadTasks = async () => {\n    try {\n      setLoading(true);\n      const userTasks = await taskService.getUserTasks(user.id);\n      setTasks(userTasks);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load tasks');\n      console.error('Load tasks error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addTask = async (newTaskData) => {\n    if (!hasPermission('create')) {\n      alert('You do not have permission to create tasks');\n      return;\n    }\n\n    try {\n      const newTask = await taskService.createTask({\n        ...newTaskData,\n        userId: user.id,\n        completed: false\n      });\n      setTasks(prevTasks => [...prevTasks, newTask]);\n    } catch (err) {\n      setError('Failed to create task');\n    }\n  };\n\n  const deleteTask = async (taskId) => {\n    if (!hasPermission('delete')) {\n      alert('You do not have permission to delete tasks');\n      return;\n    }\n\n    if (window.confirm('Are you sure you want to delete this task?')) {\n      try {\n        await taskService.deleteTask(taskId);\n        setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n      } catch (err) {\n        setError('Failed to delete task');\n      }\n    }\n  };\n\n  const toggleTask = async (taskId) => {\n    if (!hasPermission('update')) {\n      alert('You do not have permission to update tasks');\n      return;\n    }\n\n    try {\n      const task = tasks.find(t => t.id === taskId);\n      const updatedTask = await taskService.updateTask(taskId, {\n        completed: !task.completed\n      });\n      setTasks(prevTasks => prevTasks.map(task => \n        task.id === taskId ? updatedTask : task\n      ));\n    } catch (err) {\n      setError('Failed to update task');\n    }\n  };\n\n  const hasPermission = (action) => {\n    return PERMISSIONS[user.role].includes(action);\n  };\n\n  if (loading) {\n    return <div>Loading tasks...</div>;\n  }\n\n  return (\n    <div className=\"task-list p-4\">\n      {error && (\n        <div className=\"text-red-500 mb-4\">{error}</div>\n      )}\n      \n      {hasPermission('create') && (\n        <AddTask onAdd={addTask} />\n      )}\n\n      <div className=\"tasks\">\n        {tasks.length === 0 ? (\n          <p className=\"text-gray-500\">No tasks yet. Add some tasks to start taskin'!</p>\n        ) : (\n          tasks.map(task => (\n            <TaskItem\n              key={task.id}\n              {...task}\n              onToggle={() => toggleTask(task.id)}\n              onDelete={() => deleteTask(task.id)}\n              canUpdate={hasPermission('update')}\n              canDelete={hasPermission('delete')}\n            />\n          ))\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}